<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BitRate • Live Bitcoin Price Converter (BTC & Sats)</title>
  <meta name="description" content="Instantly convert Bitcoin (BTC) or Satoshis (sats) to USD, EUR, GBP and 30+ fiat currencies. Live rates, no ads."/>

  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>₿</text></svg>">

  <style>
    :root {
      --bg: #0f0f17;
      --card: #161622;
      --text: #e0e0ff;
      --accent: #f7931a;
      --accent-dark: #d97706;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 2rem 1rem;
    }
    .container {
      background: var(--card);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      width: 100%;
      max-width: 820px;
    }
    h1 {
      text-align: center;
      margin: 0 0 1.5rem;
      color: var(--accent);
      font-size: 2.2rem;
    }
    .converter {
      display: grid;
      gap: 1.5rem;
      align-items: center;
      grid-template-columns: 1fr auto 1fr;
    }
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    label {
      font-size: 0.95rem;
      opacity: 0.9;
    }
    input, select {
      padding: 1rem;
      font-size: 1.5rem;
      border: none;
      border-radius: 12px;
      background: #222233;
      color: white;
      text-align: right;
    }
    input::placeholder { color: #888; }
    input:focus, select:focus {
      outline: 3px solid var(--accent);
    }
    .swap {
      width: 56px;
      height: 56px;
      background: var(--accent);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 1.8rem;
      cursor: pointer;
      transition: all 0.3s;
      display: grid;
      place-items: center;
    }
    .swap:hover {
      background: var(--accent-dark);
      transform: rotate(180deg) scale(1.1);
    }
    .below-converter {
      margin-top: 1.5rem 0 0;
      text-align: center;
    }
    .sats-note {
      font-size: 0.9rem;
      opacity: 0.85;
      transition: all 0.4s ease;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.9rem;
      opacity: 0.7;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>

  <div class="container">
    <h1>BitRate</h1>

    <div class="converter" id="converter">
      <!-- Left Column -->
      <div class="input-group" id="leftGroup">
        <label id="leftLabel">You send</label>
        <input type="number" id="leftAmount" value="100000000" step="any" min="0" placeholder="0"/>
        <select id="leftUnit">
          <option value="btc">BTC (Bitcoin)</option>
          <option value="sats" selected>Sats (satoshis)</option>
        </select>
      </div>

      <!-- Swap Button -->
      <button class="swap" id="swapBtn" title="Swap direction">↔</button>

      <!-- Right Column -->
      <div class="input-group" id="rightGroup">
        <label id="rightLabel">You receive</label>
        <input type="text" id="rightAmount" readonly placeholder="0.00"/>
        <select id="rightUnit">
          <option value="USD">USD – US Dollar</option>
          <option value="EUR">EUR – Euro</option>
          <option value="GBP" selected>GBP – British Pound</option>
          <option value="JPY">JPY – Japanese Yen</option>
          <option value="CAD">CAD – Canadian Dollar</option>
          <option value="AUD">AUD – Australian Dollar</option>
          <option value="CHF">CHF – Swiss Franc</option>
          <option value="CNY">CNY – Chinese Yuan</option>
          <option value="INR">INR – Indian Rupee</option>
          <option value="BRL">BRL – Brazilian Real</option>
          <option value="MXN">MXN – Mexican Peso</option>
          <option value="KRW">KRW – South Korean Won</option>
          <option value="RUB">RUB – Russian Ruble</option>
          <option value="TRY">TRY – Turkish Lira</option>
          <option value="ZAR">ZAR – South African Rand</option>
        </select>
      </div>
    </div>

    <div class="below-converter">
      <div class="sats-note" id="satsNote">1 BTC = 100,000,000 sats</div>
    </div>

    <footer>
      Live prices from CoinGecko • Updated every 15 seconds • No tracking • 
      <a href="https://github.com/WhitepaperInteractive/BitRate" target="_blank">Open Source on GitHub</a>
    </footer>
  </div>

  <script>
    // Elements
    const converter = document.getElementById('converter');
    const leftGroup = document.getElementById('leftGroup');
    const rightGroup = document.getElementById('rightGroup');
    const leftAmount = document.getElementById('leftAmount');
    const rightAmount = document.getElementById('rightAmount');
    const leftUnit = document.getElementById('leftUnit');
    const rightUnit = document.getElementById('rightUnit');
    const leftLabel = document.getElementById('leftLabel');
    const rightLabel = document.getElementById('rightLabel');
    const swapBtn = document.getElementById('swapBtn');
    const satsNote = document.getElementById('satsNote');

    let rates = {};
    let isLeftCrypto = true; // true = left is crypto, right is fiat

    async function fetchRates() {
      try {
        const vs = Array.from(rightUnit.options).map(o => o.value.toLowerCase()).join(',');
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=${vs}&include_24hr_change=true`);
        const data = await res.json();
        rates = data.bitcoin;
        updateConversion();
      } catch (e) {
        rightAmount.value = "Error";
      }
    }

    function updateConversion() {
      const inputVal = parseFloat(leftAmount.value) || 0;
      const cryptoUnit = leftUnit.value;
      const fiatCode = rightUnit.value.toLowerCase();
      const rate = rates[fiatCode];

      if (!rate) {
        rightAmount.value = "—";
        return;
      }

      let btcAmount = cryptoUnit === 'sats' ? inputVal / 100000000 : inputVal;
      let fiatResult = btcAmount * rate;

      rightAmount.value = fiatResult.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    // Main swap function — visually and logically swaps both sides
    swapBtn.addEventListener('click', () => {
      // 1. Store current values
      const leftVal = leftAmount.value;
      const rightVal = rightAmount.value.replace(/,/g, '');
      const leftUnitVal = leftUnit.value;
      const rightUnitVal = rightUnit.value;

      // 2. Animate swap by moving DOM nodes
      if (isLeftCrypto) {
        converter.insertBefore(rightGroup, leftGroup);
      } else {
        converter.insertBefore(leftGroup, rightGroup);
        converter.insertBefore(rightGroup, swapBtn.nextSibling);
      }

      // 3. Swap labels
      [leftLabel.textContent, rightLabel.textContent] = [rightLabel.textContent, leftLabel.textContent];

      // 4. Restore values to new positions
      leftAmount.value = rightVal || '';
      rightAmount.value = leftVal || '';

      // 5. Swap unit selects content
      leftUnit.value = rightUnitVal;
      rightUnit.value = leftUnitVal;

      // 6. Move sats note follows crypto side
      if (isLeftCrypto) {
        satsNote.style.textAlign = 'right';
        satsNote.style.marginLeft = 'auto';
      } else {
        satsNote.style.textAlign = 'left';
        satsNote.style.marginLeft = '0';
        satsNote.style.marginRight = 'auto';
      }

      // 7. Toggle direction flag
      isLeftCrypto = !isLeftCrypto;

      // 8. Re-fetch rates if fiat moved to left (rare, but safe)
      if (!isLeftCrypto) fetchRates();

      // 9. Update conversion after everything settles
      setTimeout(updateConversion, 50);
    });

    // Input listeners — always from left side (now the input side)
    leftAmount.addEventListener('input', updateConversion);
    leftUnit.addEventListener('change', updateConversion);
    rightUnit.addEventListener('change', () => {
      fetchRates(); // New fiat currency selected
    });

    // Initial load
    fetchRates();
    setInterval(fetchRates, 15000);
  </script>
</body>
</html>