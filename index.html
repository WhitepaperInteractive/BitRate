<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BitRate • Live Bitcoin Price Converter (BTC & Sats)</title>
  <meta name="description" content="Instantly convert Bitcoin (BTC) or Satoshis (sats) to USD, EUR, GBP and 30+ fiat currencies. Live rates, no ads."/>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>₿</text></svg>">

  <style>
    :root {
      --bg: #0f0f17;
      --card: #161622;
      --text: #e0e0ff;
      --accent: #f7931a;
      --accent-dark: #d97706;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 2rem 1rem;
    }
    .container {
      background: var(--card);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      width: 100%;
      max-width: 820px;
    }
    h1 {
      text-align: center;
      margin: 0 0 1.5rem;
      color: var(--accent);
      font-size: 2.2rem;
    }
    .converter {
      display: grid;
      gap: 1rem;
      align-items: center;
      grid-template-columns: 1fr auto 1fr;
    }
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    label {
      font-size: 0.95rem;
      opacity: 0.9;
    }
    input, select {
      padding: 1rem;
      font-size: 1.5rem;
      border: none;
      border-radius: 12px;
      background: #222233;
      color: white;
      text-align: right;
    }
    input:focus, select:focus {
      outline: 3px solid var(--accent);
    }
    .swap {
      width: 50px;
      height: 50px;
      background: var(--accent);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 1.6rem;
      cursor: pointer;
      transition: 0.3s;
      display: grid;
      place-items: center;
    }
    .swap:hover {
      background: var(--accent-dark);
      transform: rotate(180deg);
    }
    .below-converter {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
    }
    .sats-note {
      font-size: 0.85rem;
      opacity: 0.8;
      text-align: center;
      flex: 1;
      transition: margin 0.3s ease;
    }
    .sats-note.left-aligned {
      margin-right: auto;
      margin-left: 0;
    }
    .sats-note.right-aligned {
      margin-left: auto;
      margin-right: 0;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.9rem;
      opacity: 0.7;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>BitRate</h1>

    <div class="converter">
      <!-- Left side -->
      <div class="input-group">
        <label for="cryptoAmount">You send</label>
        <input type="number" id="cryptoAmount" value="1" step="any" min="0"/>
        <select id="cryptoUnit">
          <option value="btc">BTC (Bitcoin)</option>
          <option value="sats" selected>Sats (satoshis)</option>
        </select>
      </div>

      <!-- Swap button -->
      <button class="swap" id="swapBtn" title="Swap direction">↔</button>

      <!-- Right side -->
      <div class="input-group">
        <label for="fiatAmount">You receive</label>
        <input type="number" id="fiatAmount" readonly placeholder="0.00" step="0.01"/>
        <select id="fiatCurrency">
          <option value="USD">USD – US Dollar</option>
          <option value="EUR">EUR – Euro</option>
          <option value="GBP" selected>GBP – British Pound</option>
          <option value="JPY">JPY – Japanese Yen</option>
          <option value="CAD">CAD – Canadian Dollar</option>
          <option value="AUD">AUD – Australian Dollar</option>
          <option value="CHF">CHF – Swiss Franc</option>
          <option value="CNY">CNY – Chinese Yuan</option>
          <option value="INR">INR – Indian Rupee</option>
          <option value="BRL">BRL – Brazilian Real</option>
          <option value="MXN">MXN – Mexican Peso</option>
          <option value="KRW">KRW – South Korean Won</option>
          <option value="RUB">RUB – Russian Ruble</option>
          <option value="TRY">TRY – Turkish Lira</option>
          <option value="ZAR">ZAR – South African Rand</option>
        </select>
      </div>
    </div>

    <div class="below-converter">
      <div class="sats-note left-aligned">
        1 BTC = 100,000,000 sats
      </div>
    </div>

    <footer>
      Live prices from CoinGecko • Updated every 15 seconds • No tracking • <a href="https://github.com/WhitepaperInteractive/BitRate" style="color:var(--accent)">Open Source</a>
    </footer>
  </div>

  <script>
    const cryptoAmount = document.getElementById('cryptoAmount');
    const cryptoUnit = document.getElementById('cryptoUnit');
    const fiatAmount = document.getElementById('fiatAmount');
    const fiatCurrency = document.getElementById('fiatCurrency');
    const swapBtn = document.getElementById('swapBtn');
    const satsNote = document.querySelector('.sats-note');

    let rates = {};
    let isCryptoToFiat = true; // true = crypto to fiat, false = fiat to crypto

    // Fetch prices from CoinGecko (free, no key needed)
    async function fetchRates() {
      try {
        const ids = 'bitcoin';
        const vs = Array.from(fiatCurrency.options).map(o => o.value.toLowerCase()).join(',');
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=${vs}&include_24hr_change=true`);
        const data = await res.json();
        rates = data.bitcoin;
        updateConversion();
      } catch (e) {
        getOutputElement().value = "Error loading rates";
      }
    }

    function getInputElement() {
      return isCryptoToFiat ? cryptoAmount : fiatAmount;
    }

    function getOutputElement() {
      return isCryptoToFiat ? fiatAmount : cryptoAmount;
    }

    function updateConversion() {
      const inputEl = getInputElement();
      const outputEl = getOutputElement();
      const inputVal = parseFloat(inputEl.value) || 0;
      const currency = fiatCurrency.value.toLowerCase();
      const rate = rates[currency];

      if (!rate) {
        outputEl.value = "—";
        return;
      }

      let result;
      if (isCryptoToFiat) {
        // Crypto to Fiat
        const btc = cryptoUnit.value === 'sats' ? inputVal / 100000000 : inputVal;
        result = (btc * rate).toFixed(2);
        outputEl.value = parseFloat(result).toLocaleString();
      } else {
        // Fiat to Crypto
        const btc = inputVal / rate;
        if (cryptoUnit.value === 'sats') {
          result = Math.round(btc * 100000000);
          outputEl.value = result;
        } else {
          outputEl.value = btc.toFixed(8);
        }
      }
    }

    // Swap direction
    swapBtn.addEventListener('click', (e) => {
      e.preventDefault();
      // Store current values before swap
      const currentCryptoVal = parseFloat(cryptoAmount.value) || 0;
      const currentFiatVal = parseFloat(fiatAmount.value.replace(/,/g, '')) || 0;

      // Flip direction
      isCryptoToFiat = !isCryptoToFiat;

      // Swap labels
      const leftLabel = document.querySelectorAll('.input-group label')[0];
      const rightLabel = document.querySelectorAll('.input-group label')[1];
      [leftLabel.textContent, rightLabel.textContent] = [rightLabel.textContent, leftLabel.textContent];

      // Flip readonly and set input value from previous output
      if (isCryptoToFiat) {
        cryptoAmount.removeAttribute('readonly');
        fiatAmount.setAttribute('readonly', true);
        // Previous fiat becomes new crypto input? No—for pure swap, set to previous crypto equiv, but since direction flipped, better to set input to 0 or previous input equiv. Here, reset input to previous input's equiv in new units? Wait, simple: set new input to previous input value (but units may differ). For now, set to 0 to avoid confusion; adjust if needed.
        cryptoAmount.value = currentCryptoVal; // Keep same number, let user adjust
      } else {
        fiatAmount.removeAttribute('readonly');
        cryptoAmount.setAttribute('readonly', true);
        fiatAmount.value = currentFiatVal.toFixed(2);
      }

      // Swap sats note position visually
      satsNote.classList.toggle('left-aligned');
      satsNote.classList.toggle('right-aligned');

      // Trigger update after swap (delayed to avoid event conflicts)
      setTimeout(updateConversion, 10);
    });

    // Event listeners (bidirectional)
    cryptoAmount.addEventListener('input', () => { if (isCryptoToFiat) updateConversion(); });
    fiatAmount.addEventListener('input', () => { if (!isCryptoToFiat) updateConversion(); });
    cryptoUnit.addEventListener('change', updateConversion);
    fiatCurrency.addEventListener('change', fetchRates);

    // Initial load + refresh every 15 seconds
    fetchRates();
    setInterval(fetchRates, 15000);
  </script>
</body>
</html>